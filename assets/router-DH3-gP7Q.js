import{s as o}from"./index-CB3bbpMU.js";const h=n=>{document.body.addEventListener("click",t=>{if(t.defaultPrevented||t.button!==0||t.metaKey||t.ctrlKey||t.shiftKey)return;const e=t.composedPath().filter(a=>a.tagName==="A")[0];if(!e||e.target||e.hasAttribute("download")||e.getAttribute("rel")==="external")return;const s=e.href;if(!s||s.indexOf("mailto:")!==-1)return;const i=window.location,r=i.origin||i.protocol+"//"+i.host;s.indexOf(r)===0&&(t.preventDefault(),s!==i.href&&(window.history.pushState({},"",s),n(i,t)))}),window.addEventListener("popstate",t=>n(window.location,t)),n(window.location,null)};class c{callback;#t=!0;#e;get navigationComplete(){return this.#e.promise}#s(){this.#e=Promise.withResolvers()}constructor(t){this.callback=t,this.#s(),h(async(e,s)=>{this.#t?this.#t=!1:(this.#e?.reject(),this.#s()),s&&s.type==="popstate"&&await l(),await t({location:e,event:s}),this.#e.resolve()})}}function l(){return new Promise(n=>{const t=()=>{window.removeEventListener("hashchange",t),setTimeout(n,0)};window.addEventListener("hashchange",t)})}class u{#t={};constructor(){window.addEventListener("hashchange",()=>this.#s()),this.#s()}$(t,e){if(e!==void 0)this.#t[t]=e,this.#n();else return this.#t[t]}get params(){return{...this.#t}}has(t){return this.$(t)!==void 0}#e(t){if(t==="true")return!0;if(t==="false")return!1;const e=Number(t);return!isNaN(e)&&t.trim()!==""?e:t}#s(){const t=window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.hash,e={};if(!t){this.#t=e;return}const s=t.split("&");for(const i of s)if(i.includes("=")){const[r,a]=i.split("=");e[decodeURIComponent(r)]=this.#e(decodeURIComponent(a))}else e[decodeURIComponent(i)]=!0;this.#t=e,this.#i.forEach(i=>i()),this.#i=[]}#n(){const t=[];for(const e in this.#t){const s=this.#t[e];s===!0?t.push(e):s===!1?t.push(`${e}=false`):s===""?t.push(`${e}=`):s!==void 0&&s!==!1&&s!==null&&t.push(`${e}=${encodeURIComponent(String(s))}`)}window.location.hash=t.join("&")}#i=[];waitForUpdate(){return new Promise(t=>{this.#i.push(t)})}}const d=new class{constructor(){this.hash=new u,this.#t=new c(async({})=>{if(await o.updateComplete,this.hash.has("search")){const n=this.hash.$("search");n!==o.search&&(o.search=n,o.page="search")}})}#t};export{d as default};
